<card :with-padding=<%= false %> >
  <h2 style="margin-top: 0px;"><%= @folders.size %> Folders</h2>
  <% @folders.each_slice(4) do |folders| %>
    <div style="display: flex; box-sizing: border-box;">
      <% folders.each do |folder| %>
        <div class="folders--list-item">
          <%= link_to folder_path(folder), class: "folders--list-item--link" do %>
            <span class="folders--snippet-count"><%= folder.snippet_count %></span>
            <img style="display: block; margin: 0 auto;" src="/icons/folder-1.svg" width="28">
            <span class="folders--list-item--title"><%= folder.name %></span>
          <% end %>
          <div>
            <% folder.snippets.order(created_at: :desc).limit(3).each do |snippet| %>
              <div class="preview-wrapper">
                <div style="display: flex; justify-content: space-between;">
                  <span class="language-tag"><%= snippet.language.capitalize %></span>
                  <span class="date-tag">Just now</span>
                </div>
                <%# TODO: Remove the ellipsis for snippets that don't overflow %>
                <span style="display: block; font-size: 14px; border-radius: 2px; margin-top: 4px;"><%= snippet.description.first(78) %>...</span>
              </div>
            <% end %>
          </div>
        </div>
      <% end %>

      <% (4 - folders.length).times do |i| %>
        <div style="height: 100px; flex: 1 0 25%; text-align: center;">
          <%# <%= link_to folder.name, folder_path(folder) %>
        </div>
      <% end %>
    </div>
  <% end %>
  <div class="folders--options-wrapper">
    <%= link_to 'NEW FOLDER', new_folder_path, class: 'button--cta-new' %>
    <%= link_to 'NEW SNIPPET', new_snippet_path, class: 'button--cta-new' %>
  </div>
</card>
